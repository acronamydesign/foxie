var api = require("foxie-api"),
		data = require("foxie-data"),
		path = require("path"),
		api = {
			newData:api.data.extend,
			machineName:api.misc.machineName
		}


module.exports = function(assets,themeName){

	if(assets.build == undefined){
		assets.build=[]
		assets.build.src=""
		assets.build.dest=""
	}
	else{
		var build = assets.build
		if(typeof build.src == "string") build.src = path.join(data.public.themes,themeName,assets.build.src)
		if(typeof build.dest == "string") build.dest = path.join(data.public.themes,themeName,assets.build.dest)
	}

	var theme = themeName;
	var readyThemeInd = data.themes.ready.indexOf(theme)

	var tmpObj = {}
	tmpObj[themeName] = {}
	tmpObj[themeName]["scripts"] = assets.scripts
	tmpObj[themeName]["stylesheets"] = assets.stylesheets
	tmpObj[themeName]["libraries"] = assets.libraries
	tmpObj[themeName]["build"] = assets.build

	//get the ready themes and add assets to them

	api.newData("themes",api.machineName(theme)+"--assets",{
		settings:{
			styles:assets.stylesheets,
			scripts:assets.scripts,
			libraries:assets.libraries,
			build:{
				src:assets.build.src,
				dest:assets.build.dest,
				options:assets.build.options
			}
		}
	})


}
