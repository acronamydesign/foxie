api = require("foxie-api"),
api = {
	htmlEL:api.template.htmlEl
}

module.exports = function(boxDefinitions,themeBoxesRes,tempObj,themeName){
	for(b in boxDefinitions){
		var machineName = boxDefinitions[b];
		//Names
		var friendlyName = themeBoxesRes.box[machineName]
		tempObj[themeName][machineName] = {}
		tempObj[themeName][machineName]["name"] = friendlyName
		//Wrapper
		var wrapper = themeBoxesRes.wrapper[machineName]
		if(wrapper) tempObj[themeName][machineName]["wrapper"] = wrapper
		else tempObj[themeName][machineName]["wrapper"] = "div"
		var wrapper = tempObj[themeName][machineName]["wrapper"]

		//Classes
		var classes = themeBoxesRes.classes[machineName]
		if(classes) tempObj[themeName][machineName]["classes"] = ".box-"+friendlyName+" "+classes
		else tempObj[themeName][machineName]["classes"] = ".box-"+friendlyName
		var classes = tempObj[themeName][machineName]["classes"]

		//html Contents (mixins)
		var mixin = themeBoxesRes.mixin[machineName]
		if(mixin){
			tempObj[themeName][machineName]["mixin"] = []
			for(html in mixin){
				tempObj[themeName][machineName]["mixin"].push(mixin[html])
			}
			var mixin = tempObj[themeName][machineName]["mixin"].join("")
		}


		//Compile
		tempObj[themeName][machineName]["compile"] = api.htmlEL(wrapper,mixin,{
			classes:classes
		})
	}
}
