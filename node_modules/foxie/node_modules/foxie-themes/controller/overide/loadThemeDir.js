var data = require("foxie-data"),
		recurseDir = require("recursive-readdir")

module.exports = function(){

	var themeSet = data.themes_set;
		var tempArr = []
		//get themes to parse (remove duplicates for performance reasons)
		for(theme in themeSet){
			tempArr.push(themeSet[theme])
			//remove duplicates
			tempArr = tempArr.filter(function(item, pos) {
				return tempArr.indexOf(item) == pos;
			})
		}

		function recurse(__path,themeName){
			recurseDir(__path,function(err,res){
				if(err) console.log(err)
				require("./themeManifest.js")(res,__path,themeName)
			})
		}
		//recursive read
		for(theme in tempArr){
			var themePath = data.public.themes+"/"+tempArr[theme]
			recurse(themePath,tempArr[theme])
		}

}
