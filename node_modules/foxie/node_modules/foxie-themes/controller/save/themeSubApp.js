var data = require("foxie-data"),
	api = require("foxie-api"),
	mongoose = require("foxie-mongoose")

api = {
	loadModel: api.connection.loadModel,
	queryGate: api.connection.queryGate,
	installed: api.misc.installStat,
	machineName: api.misc.machineName
}


var schema = {
	mountedThemes: api.loadModel("foxie-themes", "mount.model.js")
}

module.exports = function () {

	api.queryGate(schema.mountedThemes, function () { //save settings for which sub app uses which theme
		var themeSet = data.themes_set;
		for (mount in themeSet) {
			var saveObj = {
				machineName:api.machineName(themeSet[mount]),
				mount: mount,
				theme: themeSet[mount],
			}
			mountedThemes = new schema.mountedThemes(saveObj)
			mountedThemes.save(function (err) {
				if (err) console.log(err)
			})
		}
	})

}
