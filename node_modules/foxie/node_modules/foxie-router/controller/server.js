var api = require("foxie-api"),
		data = require("foxie-data"),
		express = require("express")

//set app config
var app = api.router.select("app")
app.listen(data.server.port);

app.set('view engine', data.themes.engine);
app.set('views', data.themes.overide_dir);

console.log(data.public.themes+"/"+"foxes/styles/")

app.use(require("stylus").middleware({//this part should reference our theme
	src:data.public.themes+"/"+"foxes/"
}))

app.use("/themes/foxes",express.static("/home/adam/node-www/foxie-cms/public/themes/foxes"))//this part also only references our theme

//set admin config
var admin = api.router.select("admin")
admin.set("views",data.themes.overide_dir)
app.use(data.server.base_path.admin, admin);

//set installer config
var installer = api.router.select("installer")
installer.set("views",data.themes.overide_dir)
app.use(data.server.base_path.installer, installer);

module.exports = {
	app:app,
	admin:admin,
	installer:installer
}

require("../routes/app.route.js")
require("../routes/admin.route.js")
require("../routes/installer.route.js")
