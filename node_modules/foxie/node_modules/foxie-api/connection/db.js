var mongoose = require("mongoose"),
		mainPath = require("../path/mainPath.js"),
		databaseConf = require(mainPath("foxie")+"/database/database.json")
		colors = require("colors");

module.exports = {
	toFoxie: "mongodb://" + databaseConf.host + ":" + databaseConf.port + "/" + databaseConf.database,
	mongoose: mongoose,
	get connectApp() {
		return this.mongoose.connect(this.toFoxie,{
			user:databaseConf.user,
			pass:databaseConf.password
		})
	},
	get open() {
		return this.connectApp.connection
	},
	connect: function () {
		var db = this.open;
		db.on('error', function (err) {
			console.log('connection error'.red, err);
		});
		db.once('open', function () {
			console.log('connected to mongoose.'.green);
		});
		return db;
	}
}
